(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{25:function(t){t.exports={CREATE:{title:"Create A Node",inputs:[{title:"Name",name:"name"},{title:"Description",name:"description"}]},EDIT:{title:"Edit A Node",inputs:[{title:"Name",name:"name"},{title:"Description",name:"description"}]}}},26:function(t,e,n){t.exports=n(61)},48:function(t,e,n){},49:function(t,e,n){},58:function(t,e,n){},59:function(t,e,n){},60:function(t,e,n){},61:function(t,e,n){"use strict";n.r(e);var a=n(0),r=n.n(a),i=n(12),o=n.n(i),d=n(3),c=n(8),s=n(1),l="INIT_MOVE_NODE",u={SHOW_OPTIONS:"SHOW_OPTIONS",PENDING_CREATE:"PENDING",CREATE:"CREATE",PENDING_EDIT:"PENDING_EDIT",EDIT:"EDIT",PENDING_MOVE:"PENDING_MOVE",MOVE:"MOVE",DELETE:"DELETE",TOGGLE:"TOGGLE"},p={activeNode:null,shouldUpdate:!0,data:{name:"A",description:"Node A",id:1,status:"INCLOMPLETE",children:[{name:"Collapsible node",description:"The size of the collapsed node depends on the number of subnodes",status:"INCLOMPLETE",id:2,children:[{name:"Click on me to see node edit & creation options",description:"There are a few :)",status:"INCLOMPLETE",id:3},{name:"You can drag and drop nodes around the tree",description:"Pretty neat, huh?",status:"INCLOMPLETE",id:4},{name:"Any changes will persist if you refresh",description:"The redux state is saved in local storage, so your session is saved.",status:"INCLOMPLETE",id:5}]},{name:"B",description:"Node B",status:"INCLOMPLETE",id:6,children:[{name:"Tech stack:",description:"A list of libraries used to make this app",status:"INCLOMPLETE",id:7,children:[{name:"React",description:"A popular, fast library for building UI components",status:"INCLOMPLETE",id:8},{name:"D3",description:"For interactive, dynamic data visualizations",status:"INCLOMPLETE",id:9},{name:"Redux",description:"State-based, event-driven data flow",status:"INCLOMPLETE",id:10}]},{name:"J",description:"Node J",status:"INCLOMPLETE",id:11}]}]}},h={modalIsOpen:!1,shouldCloseOnOverlayClick:!0},E=null,f="CREATE",m="EDIT",v={mode:E,formData:{}},O=Object(c.c)({modal:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h;switch((arguments.length>1?arguments[1]:void 0).type){case"INIT_CREATE_NODE":case"INIT_EDIT_NODE":return Object(s.a)({},t,{modalIsOpen:!0});case"CREATE_NODE":case"EDIT_NODE":case"DELETE_NODE":case"CLOSE_MODAL":return Object(s.a)({},t,{modalIsOpen:!1});default:return t}},tree:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SHOW_NODE_OPTIONS":var n=e.payload,a=n.id,r=n.position,i=n.children,o=n._children;return Object(s.a)({},t,{shouldUpdate:!1,activeNode:{id:a,position:r,children:i,_children:o,activeState:u.SHOW_OPTIONS}});case"INIT_CREATE_NODE":var d=e.payload.parentId;return Object(s.a)({},t,{shouldUpdate:!1,activeNode:{activeState:u.PENDING,parentId:d}});case"INIT_EDIT_NODE":var c=e.payload,h=c.id,E=c.name,f=c.description,m=c.parentId;return Object(s.a)({},t,{shouldUpdate:!1,activeNode:{id:h,parentId:m,name:E,description:f,activeState:u.PENDING_EDIT}});case"CREATE_NODE":var v=e.payload.id;return Object(s.a)({},t,{shouldUpdate:!0,activeNode:Object(s.a)({},t.activeNode,{activeState:u.CREATE,id:v})});case"EDIT_NODE":var O=e.payload,N=O.name,y=O.description,I=O.status;return Object(s.a)({},t,{shouldUpdate:!0,activeNode:Object(s.a)({},t.activeNode,{activeState:u.EDIT,name:N,description:y,status:I})});case l:var g=e.payload.id;return Object(s.a)({},t,{shouldUpdate:!1,activeNode:{id:g,activeState:u.PENDING_MOVE}});case"MOVE_NODE":var D=e.payload.id;return Object(s.a)({},t,{shouldUpdate:!0,activeNode:{id:D,activeState:u.MOVE}});case"DELETE_NODE":return Object(s.a)({},t,{shouldUpdate:!0,activeNode:Object(s.a)({},t.activeNode,{activeState:u.DELETE})});case"TOGGLE_NODE":var T=e.payload.id;return Object(s.a)({},t,{shouldUpdate:!0,activeNode:{id:T,activeState:u.TOGGLE}});default:return t}},form:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"INIT_CREATE_NODE":return Object(s.a)({},t,{mode:f});case"INIT_EDIT_NODE":return Object(s.a)({},t,{mode:m});case"EDIT_NODE":var n=e.payload,a=n.id,r=n.name,i=n.description;return Object(s.a)({},t,{mode:m,formData:{id:a,name:r,description:i}});case"CREATE_NODE":case"CLOSE_MODAL":return Object(s.a)({},t,{mode:E});default:return t}}}),N=function(t){return function(e){return function(n){console.log("initial state:",t.getState()),console.log("dispatching:",n),e(n),console.log("next state:",t.getState())}}};function y(t,e){var n;return g(t,function(t){var a=t.data;a?a.id===e&&(n=t):t.id===e&&(n=t)}),n||{}}function I(t){var e=0;return t._children?(g(t,function(t){var n=t.children,a=t._children;n&&n.length&&(e+=n.length),a&&a.length&&(e+=a.length)}),e):e}function g(t,e){e(t);var n=function(t){var e=t.children,n=t._children,a=[];return e&&e.length&&(a=a.concat(e)),n&&n.length&&(a=a.concat(n)),a.length?a:null}(t);n&&n.forEach(function(t){return g(t,e)})}var D=function(t){return function(e){return function(n){var a=t.getState().tree.data;switch(n.type){case"CREATE_NODE":var r=n.payload,i=r.name,o=r.description,d=y(a,r.parentId),c={id:function(t){var e=0;return g(t,function(t){t.id>e&&(e=t.id)}),e}(a)+1,name:i,description:o},s=d._children&&d._children.length?"_children":"children";return d[s]&&d[s].length?d[s].push(c):d[s]=[c],Object.assign(n.payload,{id:c.id}),e(n);case"EDIT_NODE":var l=n.payload,u=l.id,p=l.name,h=l.description,E=l.status,f=y(a,u);return Object.assign(f,{name:p,description:h,status:E}),e(n);case"DELETE_NODE":var m=n.payload,v=m.id,O=y(a,m.parentId),N=O.children.findIndex(function(t){return t.id===v});return O.children.splice(N,1),e(n);case"TOGGLE_NODE":var I=y(a,n.payload.id),D=I.children,T=I._children;return D&&D.length?(I._children=D,I.children=null):T&&T.length&&(I.children=T,I._children=null),e(n);case"MOVE_NODE":var _=n.payload,C=_.id,b=_.parentId,L=_.newParentId,j=y(a,C),k=y(a,b),S=y(a,L),x=S._children&&S._children.length?"_children":"children",A=k.children.findIndex(function(t){return t.id===j.id});return k.children.splice(A,1),S[x]&&S[x].length?S[x].push(j):S[x]=[j],e(n);default:return e(n)}}}},T=function(){try{var t=localStorage.getItem("state");if(null===t)return;return JSON.parse(t)}catch(e){return}}(),_=Object(c.d)(O,T,Object(c.a)(N,D));_.subscribe(function(){return function(t){try{var e=JSON.stringify(t);localStorage.setItem("state",e)}catch(n){}}(_.getState())});var C,b=_,L=n(6),j=n(7),k=n(10),S=n(9),x=n(11),A=(n(35),n(48),function(t){function e(){return Object(L.a)(this,e),Object(k.a)(this,Object(S.a)(e).apply(this,arguments))}return Object(x.a)(e,t),Object(j.a)(e,[{key:"render",value:function(){var t=this,e=this.props,n=e.x,a=e.y,i={display:e.isActive?"block":"none",left:"".concat(a+110,"px"),top:"".concat(n-20,"px")};return r.a.createElement("div",{className:"Tooltip",style:i},r.a.createElement("button",{onClick:function(){return t.props.initCreateNode(t.props.id)}},"Create Subnode"),r.a.createElement("button",{onClick:function(){return t.props.initEditNode(t.props.id)}},"Edit"),this.props.children||this.props._children?r.a.createElement("button",{onClick:function(){return t.props.toggleNode(t.props.id)}},this.props._children?"Expand":"Collapse"):null)}}]),e}(r.a.Component)),P=Object(d.b)(function(t,e){var n=t.tree.activeNode;if(n&&"SHOW_OPTIONS"===n.activeState&&n.id!==e.id){var a=n.id,r=n.position;return{isActive:!0,id:a,x:r.x,y:r.y,children:n.children,_children:n._children}}return{isActive:!1}},function(t){return{initCreateNode:function(){return t(function(t){return{type:"INIT_CREATE_NODE",payload:{parentId:t}}}.apply(void 0,arguments))},initEditNode:function(){return t(function(t){return{type:"INIT_EDIT_NODE",payload:{id:t}}}.apply(void 0,arguments))},toggleNode:function(){return t(function(t){return{type:"TOGGLE_NODE",payload:{id:t}}}.apply(void 0,arguments))}}})(A),M=(n(49),n(2)),w=function(){function t(e){var n=e.dispatch;Object(L.a)(this,t);this.selectedNode=null,this.draggingNode=null,this.dispatch=n,this.panSpeed=200,this.panBoundary=20,this.i=0,this.duration=750,this.viewerWidth=2*document.body.clientWidth,this.viewerHeight=400,this.tree=M.g().size([this.viewerHeight,this.viewerWidth]),this.baseSvg=M.e("#decision-tree-container").append("svg").attr("width",this.viewerWidth).attr("height",this.viewerHeight).attr("class","overlay"),this.g=M.e("#decision-tree-container svg").append("g").attr("transform","translate(80,0)"),this.dragBehavior=this.dragListener()}return Object(j.a)(t,[{key:"render",value:function(t){var e=t.data;t.activeNode;this.treeData=e,this.root=M.c(this.treeData),this.root.x0=this.viewerHeight/2,this.root.y0=100,this.update(this.root)}},{key:"dragListener",value:function(){var t=this;return{dragStarted:function(e){e!==t.root&&(t.dragStarted=!0,t.dispatchActions({type:l,payload:{id:e.data.id}}))},dragged:function(e){t.dragStarted&&(t.domNode=this,M.e(this).select(".ghostCircle").attr("pointer-events","none"),M.f(".ghostCircle").attr("class","ghostCircle show"),M.e(this).attr("class","node activeDrag"),t.g.selectAll("path.link").data(t.root.links(),function(t){return t.target.id}).filter(function(t,n){return t.target.id===e.id}).remove(),M.e(this).attr("cx",function(t){return e.y0=M.b.x}).attr("cy",function(t){return e.x0=M.b.y}).attr("transform",function(t){return"translate(".concat(t.y0-115,",").concat(t.x0+120,")")}))},dragEnded:function(e){if(M.f(".ghostCircle").attr("class","ghostCircle"),!t.selectedNode)return t.update(e);t.moveNode(e,t.selectedNode),M.e(this).attr("stroke",null)},overCircle:function(e){t.selectedNode=e,M.e(this).style("fill","blue")},outCircle:function(e){t.selectedNode=null,M.e(this).style("fill","red")}}}},{key:"dispatchActions",value:function(t){this.dispatch(t)}},{key:"showNodeOptions",value:function(t){this.dispatchActions({type:"SHOW_NODE_OPTIONS",payload:{id:t.data.id,position:{x:t.x,y:t.y},_children:t.data._children,children:t.data.children}})}},{key:"moveNode",value:function(t,e){this.dispatchActions({type:"MOVE_NODE",payload:{id:t.data.id,parentId:t.parent.data.id,newParentId:e.data.id}})}},{key:"overCircle",value:function(t){this.selectedNode=t}},{key:"outCircle",value:function(){this.selectedNode=null}},{key:"click",value:function(t){M.b.defaultPrevented||(this.dragStarted=!1,this.showNodeOptions(t))}},{key:"dblClick",value:function(t){this.initCreateNode(t)}},{key:"mouseDown",value:function(t){var e=this,n=this;this.mouseIsHeld=!0,setTimeout(function(){e.mouseIsHeld&&n.initEditNode(t)},300)}},{key:"mouseUp",value:function(t){console.log("mouseUp!"),this.mouseIsHeld=!1}},{key:"update",value:function(t){var e=this;this.tree(this.root),this.root.each(function(t){t.y=200*t.depth});var n=this.g.selectAll(".node").data(e.root.descendants(),function(t){return t.id||(t.id=++e.i)}),a=n.enter().append("g").attr("class","node").attr("transform",function(e){return"translate(".concat(t.y0,", ").concat(t.x0,")")}).on("click",e.click.bind(e)).call(M.a().on("start",e.dragBehavior.dragStarted).on("drag",e.dragBehavior.dragged).on("end",e.dragBehavior.dragEnded));a.append("circle").attr("r",0).transition().attr("r",function(t){var e=I(t.data);return e?4*e:6}).attr("class","nodeCircle").style("fill",function(t){return"COMPLETE"===t.data.status?"#3CB371":t.data._children?"lightsteelblue":"#fff"}),a.append("text").attr("x",function(t){return t.children||t.data._children?-10:10}).attr("dy",".35em").attr("font-size","150%").attr("class","nodeText").attr("text-anchor",function(t){return t.children||t.data._children?"end":"start"}).text(function(t){return t.data.name}).style("fill-opacity",0),a.append("circle").attr("class","ghostCircle").attr("r",20).attr("opacity",.2).style("fill","red").attr("pointer-events","mouseover").on("mouseover",e.dragBehavior.overCircle).on("mouseout",e.dragBehavior.outCircle);var r=a.merge(n);r.transition().duration(e.duration).attr("transform",function(t){return"translate(".concat(t.y,",").concat(t.x,")")}),r.select("circle.nodeCircle").attr("r",function(t){var e=I(t.data);return e?4*e:6}).style("fill",function(t){return"COMPLETE"===t.data.status?"#3CB371":t.data._children?"lightsteelblue":"#fff"}),r.select("text").transition().attr("x",function(t){return t.children?-10:t.data._children?-10-2*t.data._children.length:10}).style("fill-opacity",1);var i=n.exit().transition().duration(e.duration).attr("transform","translate(".concat(t.y,", ").concat(t.x,")")).remove();i.select("circle").attr("r",0),i.select("text").style("fill-opacity",0);var o=this.g.selectAll(".link").data(e.root.links(),function(t){return t.target.id});o.enter().insert("path","g").attr("class","link").attr("d",M.d().x(function(e){return t.y0}).y(function(e){return t.x0})).merge(o).transition().duration(e.duration).attr("d",M.d().x(function(t){return t.y}).y(function(t){return t.x})),o.exit().transition().duration(e.duration).attr("d",M.d().x(function(e){return t.y0}).y(function(e){return t.x0})).remove(),n.each(function(t){t.x0=t.x,t.y0=t.y})}}]),t}();var G=Object(d.b)(function(t){var e=t.tree;e&&e.shouldUpdate&&setTimeout(function(){return C.render(e),t},500)},function(t){return setTimeout(function(){(C=new w({dispatch:t})).render({data:{}})},300),{moveNode:function(){return t(function(t,e,n){return{type:"MOVE_NODE",payload:{id:t,parentId:e,newParentId:n}}}.apply(void 0,arguments))}}})(function(){return r.a.createElement("div",{className:"Tree"},r.a.createElement("div",{id:"decision-tree-container"},r.a.createElement(P,null)))}),R=n(18),B=n.n(R),U=n(13),H=(n(58),n(25)),V=function(t){function e(t){var n;return Object(L.a)(this,e),(n=Object(k.a)(this,Object(S.a)(e).call(this,t))).updateInput=function(t,e){n.setState(Object(U.a)({},e,t.target.value))},n.state={name:n.props.formData.name||"Name of Node",description:n.props.formData.description||"Description of Node"},n}return Object(x.a)(e,t),Object(j.a)(e,[{key:"render",value:function(){var t=this,e=H[this.props.mode];return r.a.createElement("div",{className:"Form"},r.a.createElement("h2",{className:"FormTitle"},e.title),r.a.createElement("form",null,e.inputs.map(function(e){return r.a.createElement("div",{className:"FormInput FormInput_".concat(e.title)},r.a.createElement("h4",null,e.title),r.a.createElement("input",{type:"text",value:t.state[e.name],onChange:function(n){return t.updateInput(n,e.name)}}))}),"CREATE"===this.props.mode?r.a.createElement("div",null,r.a.createElement("button",{className:"FormButton",onClick:function(){return t.props.createNode({parentId:t.props.formData.parentId,name:t.state.name,description:t.state.description})}},"Create Node")):"EDIT"===this.props.mode?r.a.createElement("div",null,r.a.createElement("button",{className:"FormButton",onClick:function(){return t.props.editNode({id:t.props.formData.id,name:t.state.name,description:t.state.description})}},"Update Node"),r.a.createElement("button",{className:"FormButton",onClick:function(){return t.props.editNode({id:t.props.formData.id,status:"COMPLETE",name:t.state.name,description:t.state.description})}},"Mark As Complete"),r.a.createElement("button",{className:"FormButton",onClick:function(){return t.props.deleteNode({id:t.props.formData.id,parentId:t.props.formData.parentId})}},"Delete")):null))}}]),e}(r.a.Component),W=Object(d.b)(function(t){var e=t.form.mode,n=t.tree,a=n.activeNode,r=n.data;if(e&&a){var i=a.id,o=a.parentId,d=y(r,i),c=d.name,s=d.description;return d.status,{mode:e,formData:{id:i,parentId:o,name:c,description:s}}}},function(t){return{createNode:function(){return t(function(t){var e=t.name,n=t.parentId;return{type:"CREATE_NODE",payload:{name:e,description:t.description,parentId:n}}}.apply(void 0,arguments))},editNode:function(){return t(function(t){return{type:"EDIT_NODE",payload:{id:t.id,name:t.name,description:t.description,status:t.status}}}.apply(void 0,arguments))},deleteNode:function(){return t(function(t){return{type:"DELETE_NODE",payload:{id:t.id,parentId:t.parentId}}}.apply(void 0,arguments))}}})(V);n(59);B.a.setAppElement("#root");var F=function(t){function e(){return Object(L.a)(this,e),Object(k.a)(this,Object(S.a)(e).apply(this,arguments))}return Object(x.a)(e,t),Object(j.a)(e,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(B.a,{isOpen:this.props.modalIsOpen,shouldCloseOnOverlayClick:!0,className:"Modal"},r.a.createElement("div",{className:"CloseButton",onClick:this.props.closeModal}),r.a.createElement(W,null)))}}]),e}(r.a.Component),J=Object(d.b)(function(t){var e=t.modal;return{modalIsOpen:e.modalIsOpen,shouldCloseOnOverlayClick:e.shouldCloseOnOverlayClick}},function(t){return{closeModal:function(){return t({type:"CLOSE_MODAL"})}}})(F);n(60);o.a.render(r.a.createElement(d.a,{store:b},r.a.createElement(function(){return r.a.createElement("div",{className:"App"},r.a.createElement(J,null),r.a.createElement(G,null))},null)),document.getElementById("root"))}},[[26,1,2]]]);
//# sourceMappingURL=main.a4dab0ab.chunk.js.map